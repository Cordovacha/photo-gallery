const __vite__fileDeps=["assets/web-CqgTe_gf.js","assets/index-ZhYDXpB_.js","assets/index-7CQuqmcz.css","assets/web-DyNDrIpG.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{_ as te,r as pe,o as he,w as be,i as q,d as we,c as N,a as g,u as h,b as B,e as P,I as ge,f as Pe,g as ve,h as ye,j as X,k as Ee,l as Le,m as Ce,n as _e,F as ke,p as Ue,q as Oe,s as Ae,t as xe,v as Te,x as Ie,y as Re}from"./index-ZhYDXpB_.js";/*! Capacitor: https://capacitorjs.com/ - MIT License */const Fe=t=>{const e=new Map;e.set("web",{name:"web"});const a=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},n=(s,i)=>{a.platforms.set(s,i)},r=s=>{a.platforms.has(s)&&(a.currentPlatform=a.platforms.get(s))};return a.addPlatform=n,a.setPlatform=r,a},Se=t=>t.CapacitorPlatforms=Fe(t),ae=Se(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});ae.addPlatform;ae.setPlatform;var A;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(A||(A={}));class O extends Error{constructor(e,a,n){super(e),this.message=e,this.code=a,this.data=n}}const $e=t=>{var e,a;return t!=null&&t.androidBridge?"android":!((a=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||a===void 0)&&a.bridge?"ios":"web"},je=t=>{var e,a,n,r,s;const i=t.CapacitorCustomPlatform||null,o=t.Capacitor||{},c=o.Plugins=o.Plugins||{},l=t.CapacitorPlatforms,u=()=>i!==null?i.name:$e(t),m=((e=l==null?void 0:l.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||u,x=()=>m()!=="web",D=((a=l==null?void 0:l.currentPlatform)===null||a===void 0?void 0:a.isNativePlatform)||x,ne=d=>{const f=H.get(d);return!!(f!=null&&f.platforms.has(m())||z(d))},se=((n=l==null?void 0:l.currentPlatform)===null||n===void 0?void 0:n.isPluginAvailable)||ne,oe=d=>{var f;return(f=o.PluginHeaders)===null||f===void 0?void 0:f.find(k=>k.name===d)},z=((r=l==null?void 0:l.currentPlatform)===null||r===void 0?void 0:r.getPluginHeader)||oe,ie=d=>t.console.error(d),le=(d,f,k)=>Promise.reject("".concat(k,' does not have an implementation of "').concat(f,'".')),H=new Map,ce=(d,f={})=>{const k=H.get(d);if(k)return console.warn('Capacitor plugin "'.concat(d,'" already registered. Cannot register plugins twice.')),k.proxy;const C=m(),U=z(d);let y;const ue=async()=>(!y&&C in f?y=typeof f[C]=="function"?y=await f[C]():y=f[C]:i!==null&&!y&&"web"in f&&(y=typeof f.web=="function"?y=await f.web():y=f.web),y),fe=(p,b)=>{var v,E;if(U){const L=U==null?void 0:U.methods.find(w=>b===w.name);if(L)return L.rtype==="promise"?w=>o.nativePromise(d,b.toString(),w):(w,S)=>o.nativeCallback(d,b.toString(),w,S);if(p)return(v=p[b])===null||v===void 0?void 0:v.bind(p)}else{if(p)return(E=p[b])===null||E===void 0?void 0:E.bind(p);throw new O('"'.concat(d,'" plugin is not implemented on ').concat(C),A.Unimplemented)}},M=p=>{let b;const v=(...E)=>{const L=ue().then(w=>{const S=fe(w,p);if(S){const $=S(...E);return b=$==null?void 0:$.remove,$}else throw new O('"'.concat(d,".").concat(p,'()" is not implemented on ').concat(C),A.Unimplemented)});return p==="addListener"&&(L.remove=async()=>b()),L};return v.toString=()=>"".concat(p.toString(),"() { [capacitor code] }"),Object.defineProperty(v,"name",{value:p,writable:!1,configurable:!1}),v},K=M("addListener"),J=M("removeListener"),me=(p,b)=>{const v=K({eventName:p},b),E=async()=>{const w=await v;J({eventName:p,callbackId:w},b)},L=new Promise(w=>v.then(()=>w({remove:E})));return L.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await E()},L},W=new Proxy({},{get(p,b){switch(b){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return U?me:K;case"removeListener":return J;default:return M(b)}}});return c[d]=W,H.set(d,{name:d,proxy:W,platforms:new Set([...Object.keys(f),...U?[C]:[]])}),W},de=((s=l==null?void 0:l.currentPlatform)===null||s===void 0?void 0:s.registerPlugin)||ce;return o.convertFileSrc||(o.convertFileSrc=d=>d),o.getPlatform=m,o.handleError=ie,o.isNativePlatform=D,o.isPluginAvailable=se,o.pluginMethodNoop=le,o.registerPlugin=de,o.Exception=O,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o.platform=o.getPlatform(),o.isNative=o.isNativePlatform(),o},De=t=>t.Capacitor=je(t),R=De(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),F=R.registerPlugin;R.Plugins;class V{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn('Capacitor WebPlugin "'.concat(e.name,'" config object was deprecated in v3 and will be removed in v4.')),this.config=e)}addListener(e,a){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(a);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s),n&&this.sendRetainedArgumentsForEvent(e);const i=async()=>this.removeListener(e,a);return Promise.resolve({remove:i})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,a,n){const r=this.listeners[e];if(!r){if(n){let s=this.retainedEventArguments[e];s||(s=[]),s.push(a),this.retainedEventArguments[e]=s}return}r.forEach(s=>s(a))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,a){this.windowListeners[a]={registered:!1,windowEventName:e,pluginEventName:a,handler:n=>{this.notifyListeners(a,n)}}}unimplemented(e="not implemented"){return new R.Exception(e,A.Unimplemented)}unavailable(e="not available"){return new R.Exception(e,A.Unavailable)}async removeListener(e,a){const n=this.listeners[e];if(!n)return;const r=n.indexOf(a);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const a=this.retainedEventArguments[e];a&&(delete this.retainedEventArguments[e],a.forEach(n=>{this.notifyListeners(e,n)}))}}const Y=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Q=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class He extends V{async getCookies(){const e=document.cookie,a={};return e.split(";").forEach(n=>{if(n.length<=0)return;let[r,s]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=Q(r).trim(),s=Q(s).trim(),a[r]=s}),a}async setCookie(e){try{const a=Y(e.key),n=Y(e.value),r="; expires=".concat((e.expires||"").replace("expires=","")),s=(e.path||"/").replace("path=",""),i=e.url!=null&&e.url.length>0?"domain=".concat(e.url):"";document.cookie="".concat(a,"=").concat(n||"").concat(r,"; path=").concat(s,"; ").concat(i,";")}catch(a){return Promise.reject(a)}}async deleteCookie(e){try{document.cookie="".concat(e.key,"=; Max-Age=0")}catch(a){return Promise.reject(a)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const a of e)document.cookie=a.replace(/^ +/,"").replace(/=.*/,"=;expires=".concat(new Date().toUTCString(),";path=/"))}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}F("CapacitorCookies",{web:()=>new He});const Me=async t=>new Promise((e,a)=>{const n=new FileReader;n.onload=()=>{const r=n.result;e(r.indexOf(",")>=0?r.split(",")[1]:r)},n.onerror=r=>a(r),n.readAsDataURL(t)}),We=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(r=>r.toLocaleLowerCase()).reduce((r,s,i)=>(r[s]=t[e[i]],r),{})},qe=(t,e=!0)=>t?Object.entries(t).reduce((n,r)=>{const[s,i]=r;let o,c;return Array.isArray(i)?(c="",i.forEach(l=>{o=e?encodeURIComponent(l):l,c+="".concat(s,"=").concat(o,"&")}),c.slice(0,-1)):(o=e?encodeURIComponent(i):i,c="".concat(s,"=").concat(o)),"".concat(n,"&").concat(c)},"").substr(1):null,Be=(t,e={})=>{const a=Object.assign({method:t.method||"GET",headers:t.headers},e),r=We(t.headers)["content-type"]||"";if(typeof t.data=="string")a.body=t.data;else if(r.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[i,o]of Object.entries(t.data||{}))s.set(i,o);a.body=s.toString()}else if(r.includes("multipart/form-data")||t.data instanceof FormData){const s=new FormData;if(t.data instanceof FormData)t.data.forEach((o,c)=>{s.append(c,o)});else for(const o of Object.keys(t.data))s.append(o,t.data[o]);a.body=s;const i=new Headers(a.headers);i.delete("content-type"),a.headers=i}else(r.includes("application/json")||typeof t.data=="object")&&(a.body=JSON.stringify(t.data));return a};class Ge extends V{async request(e){const a=Be(e,e.webFetchExtra),n=qe(e.params,e.shouldEncodeUrlParams),r=n?"".concat(e.url,"?").concat(n):e.url,s=await fetch(r,a),i=s.headers.get("content-type")||"";let{responseType:o="text"}=s.ok?e:{};i.includes("application/json")&&(o="json");let c,l;switch(o){case"arraybuffer":case"blob":l=await s.blob(),c=await Me(l);break;case"json":c=await s.json();break;case"document":case"text":default:c=await s.text()}const u={};return s.headers.forEach((m,x)=>{u[x]=m}),{data:c,headers:u,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}F("CapacitorHttp",{web:()=>new Ge});var _;(function(t){t.Prompt="PROMPT",t.Camera="CAMERA",t.Photos="PHOTOS"})(_||(_={}));var T;(function(t){t.Rear="REAR",t.Front="FRONT"})(T||(T={}));var G;(function(t){t.Uri="uri",t.Base64="base64",t.DataUrl="dataUrl"})(G||(G={}));class re extends V{async getPhoto(e){return new Promise(async(a,n)=>{if(e.webUseInput||e.source===_.Photos)this.fileInputExperience(e,a,n);else if(e.source===_.Prompt){let r=document.querySelector("pwa-action-sheet");r||(r=document.createElement("pwa-action-sheet"),document.body.appendChild(r)),r.header=e.promptLabelHeader||"Photo",r.cancelable=!1,r.options=[{title:e.promptLabelPhoto||"From Photos"},{title:e.promptLabelPicture||"Take Picture"}],r.addEventListener("onSelection",async s=>{s.detail===0?this.fileInputExperience(e,a,n):this.cameraExperience(e,a,n)})}else this.cameraExperience(e,a,n)})}async pickImages(e){return new Promise(async(a,n)=>{this.multipleFileInputExperience(a,n)})}async cameraExperience(e,a,n){if(customElements.get("pwa-camera-modal")){const r=document.createElement("pwa-camera-modal");r.facingMode=e.direction===T.Front?"user":"environment",document.body.appendChild(r);try{await r.componentOnReady(),r.addEventListener("onPhoto",async s=>{const i=s.detail;i===null?n(new O("User cancelled photos app")):i instanceof Error?n(i):a(await this._getCameraPhoto(i,e)),r.dismiss(),document.body.removeChild(r)}),r.present()}catch(s){this.fileInputExperience(e,a,n)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(e,a,n)}fileInputExperience(e,a,n){let r=document.querySelector("#_capacitor-camera-input");const s=()=>{var i;(i=r.parentNode)===null||i===void 0||i.removeChild(r)};r||(r=document.createElement("input"),r.id="_capacitor-camera-input",r.type="file",r.hidden=!0,document.body.appendChild(r),r.addEventListener("change",i=>{const o=r.files[0];let c="jpeg";if(o.type==="image/png"?c="png":o.type==="image/gif"&&(c="gif"),e.resultType==="dataUrl"||e.resultType==="base64"){const l=new FileReader;l.addEventListener("load",()=>{if(e.resultType==="dataUrl")a({dataUrl:l.result,format:c});else if(e.resultType==="base64"){const u=l.result.split(",")[1];a({base64String:u,format:c})}s()}),l.readAsDataURL(o)}else a({webPath:URL.createObjectURL(o),format:c}),s()}),r.addEventListener("cancel",i=>{n(new O("User cancelled photos app")),s()})),r.accept="image/*",r.capture=!0,e.source===_.Photos||e.source===_.Prompt?r.removeAttribute("capture"):e.direction===T.Front?r.capture="user":e.direction===T.Rear&&(r.capture="environment"),r.click()}multipleFileInputExperience(e,a){let n=document.querySelector("#_capacitor-camera-input-multiple");const r=()=>{var s;(s=n.parentNode)===null||s===void 0||s.removeChild(n)};n||(n=document.createElement("input"),n.id="_capacitor-camera-input-multiple",n.type="file",n.hidden=!0,n.multiple=!0,document.body.appendChild(n),n.addEventListener("change",s=>{const i=[];for(let o=0;o<n.files.length;o++){const c=n.files[o];let l="jpeg";c.type==="image/png"?l="png":c.type==="image/gif"&&(l="gif"),i.push({webPath:URL.createObjectURL(c),format:l})}e({photos:i}),r()}),n.addEventListener("cancel",s=>{a(new O("User cancelled photos app")),r()})),n.accept="image/*",n.click()}_getCameraPhoto(e,a){return new Promise((n,r)=>{const s=new FileReader,i=e.type.split("/")[1];a.resultType==="uri"?n({webPath:URL.createObjectURL(e),format:i,saved:!1}):(s.readAsDataURL(e),s.onloadend=()=>{const o=s.result;a.resultType==="dataUrl"?n({dataUrl:o,format:i,saved:!1}):n({base64String:o.split(",")[1],format:i,saved:!1})},s.onerror=o=>{r(o)})})}async checkPermissions(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch(e){throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}new re;const Ve=F("Camera",{web:()=>new re});var I;(function(t){t.Documents="DOCUMENTS",t.Data="DATA",t.Library="LIBRARY",t.Cache="CACHE",t.External="EXTERNAL",t.ExternalStorage="EXTERNAL_STORAGE"})(I||(I={}));var Z;(function(t){t.UTF8="utf8",t.ASCII="ascii",t.UTF16="utf16"})(Z||(Z={}));const j=F("Filesystem",{web:()=>te(()=>import("./web-CqgTe_gf.js"),__vite__mapDeps([0,1,2])).then(t=>new t.FilesystemWeb)}),ee=F("Preferences",{web:()=>te(()=>import("./web-DyNDrIpG.js"),__vite__mapDeps([3,1,2])).then(t=>new t.PreferencesWeb)}),ze=()=>{const t="photos",e=pe([]),a=c=>new Promise((l,u)=>{const m=new FileReader;m.onerror=u,m.onload=()=>{l(m.result)},m.readAsDataURL(c)}),n=async c=>{e.value=e.value.filter(u=>u.filepath!==c.filepath);const l=c.filepath.substr(c.filepath.lastIndexOf("/")+1);await j.deleteFile({path:l,directory:I.Data})},r=()=>{ee.set({key:t,value:JSON.stringify(e.value)})},s=async()=>{const c=await ee.get({key:t}),l=c.value?JSON.parse(c.value):[];if(!q("hybrid"))for(const u of l){const m=await j.readFile({path:u.filepath,directory:I.Data});u.webviewPath="data:image/jpeg;base64,".concat(m.data)}e.value=l},i=async(c,l)=>{let u;if(q("hybrid"))u=(await j.readFile({path:c.path})).data;else{const D=await(await fetch(c.webPath)).blob();u=await a(D)}const m=await j.writeFile({path:l,data:u,directory:I.Data});return q("hybrid")?{filepath:m.uri,webviewPath:R.convertFileSrc(m.uri)}:{filepath:l,webviewPath:c.webPath}},o=async()=>{const c=await Ve.getPhoto({resultType:G.Uri,source:_.Camera,quality:100}),l=Date.now()+".jpeg",u=await i(c,l);e.value=[u,...e.value]};return he(s),be(e,r),{photos:e,takePhoto:o,deletePhoto:n}},Ke=we({__name:"Tab2Page",setup(t){const{photos:e,takePhoto:a,deletePhoto:n}=ze();return(r,s)=>(B(),N(h(Te),null,{default:g(()=>[P(h(ye),null,{default:g(()=>[P(h(ge),null,{default:g(()=>[P(h(Pe),null,{default:g(()=>[ve("Photo Gallery")]),_:1})]),_:1})]),_:1}),P(h(X),{fullscreen:!0},{default:g(()=>[P(h(X),null,{default:g(()=>[P(h(Ee),null,{default:g(()=>[P(h(Le),null,{default:g(()=>[(B(!0),Ce(ke,null,_e(h(e),i=>(B(),N(h(Ie),{size:"6",key:i.filepath},{default:g(()=>[P(h(Re),{src:i.webviewPath,"\\@click":"showActionSheet(photo)"},null,8,["src"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),P(h(Ue),{vertical:"bottom",horizontal:"center",slot:"fixed"},{default:g(()=>[P(h(Oe),{onClick:s[0]||(s[0]=i=>h(a)())},{default:g(()=>[P(h(Ae),{icon:h(xe)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}))}}),Ne=Object.freeze(Object.defineProperty({__proto__:null,default:Ke},Symbol.toStringTag,{value:"Module"}));export{Z as E,Ne as T,V as W,Be as b};
